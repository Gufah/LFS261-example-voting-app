pipeline {
  agent any

  tools {
    nodejs 'nodejs 8.9.0'
  }

  stages {
    stage("build") {
      when {
        changeset '**/result/**'
      }
      
      steps {
        dir("result") {
          sh 'npm i'
        }
      }
    }

    stage("test") {
      when {
        changeset '**/result/**'
      }

      steps {
        dir("result") {
          sh 'npm i'
          sh 'npm test'
        }
      }
    }
  }
}